import base64
exec(base64.b64decode("I2NvZGluZz11dGYtOAojIS91c3IvYmluL3B5dGhvbjIKI09yaWdpbmFsbHkgV3JpdHRlbiBCeSBDaGlkaSBLaGFuCnRyeToKICAgIGltcG9ydCBvcyxzeXMsdGltZSxkYXRldGltZSxyZSxyYW5kb20saGFzaGxpYix0aHJlYWRpbmcsanNvbixnZXRwYXNzLHVybGxpYixjb29raWVsaWIscmVxdWVzdHMKICAgIGZyb20gbXVsdGlwcm9jZXNzaW5nLnBvb2wgaW1wb3J0IFRocmVhZFBvb2wKZXhjZXB0IEltcG9ydEVycm9yOgogICAgb3Muc3lzdGVtKCJwaXAyIGluc3RhbGwgcmVxdWVzdHMiKQogICAgb3Muc3lzdGVtKCJweXRob24yIGhhdGVyLnB5IikKb3Muc3lzdGVtKCJjbGVhciIpCiIiIgp0cnk6CiAgICBteSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9tdWhhbW1hZGhhbXphMzY1LmJ5ZXRob3N0Ny5jb20iKQpleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICBwcmludCgiIikKICAgIHByaW50KCJcdCAgICBcMDMzWzE7MzFtVHVybiBvbiBtb2JpbGUgZGF0YSBPUiB3aWZpXDAzM1swOzk3bSIpCiAgICBwcmludCgiIikKICAgIHRpbWUuc2xlZXAoMSkKICAgIHJhd19pbnB1dCgiIFByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAiKQogICAgb3Muc3lzdGVtKCJweXRob24yIG5ldy5weSIpIiIiCmlmIG5vdCBvcy5wYXRoLmlzZmlsZSgiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL3Vzci9iaW4vbm9kZSIpOgogICAgb3Muc3lzdGVtKCJhcHQgdXBkYXRlICYmIGFwdCBpbnN0YWxsIG5vZGVqcyAteSIpCmlmIG5vdCBvcy5wYXRoLmlzZmlsZSgiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL3Vzci9iaW4vcnVieSIpOgogICAgb3Muc3lzdGVtKCJhcHQgaW5zdGFsbCBydWJ5IC15ICYmIGdlbSBpbnN0YWxsIGxvbGNhdCIpCmZyb20gcmVxdWVzdHMuZXhjZXB0aW9ucyBpbXBvcnQgQ29ubmVjdGlvbkVycm9yCm9zLnN5c3RlbSgiZ2l0IHB1bGwiKQppZiBub3Qgb3MucGF0aC5pc2ZpbGUoIi9kYXRhL2RhdGEvY29tLnRlcm11eC9maWxlcy9ob21lL2hwcm8vLi4uLi4vbm9kZV9tb2R1bGVzL2J5dGVzL2luZGV4LmpzIik6CiAgICBvcy5zeXN0ZW0oImZ1c2VyIC1rIDUwMDAvdGNwICYiKQogICAgb3Muc3lzdGVtKCIjIikKICAgIG9zLnN5c3RlbSgiY2QgLi4uLi4gJiYgbnBtIGluc3RhbGwiKQogICAgb3Muc3lzdGVtKCJjZCAuLi4uLiAmJiBub2RlIGluZGV4LmpzICYiKQogICAgb3Muc3lzdGVtKCJjbGVhciIpCiAgICBwcmludCgiXDAzM1sxOzMybVBsZWFzZSBTZWxlY3QgQ2hyb21lIEJyb3dzZXIgVG8gQ29udGludWVcMDMzWzA7OTdtIikKICAgIG9zLnN5c3RlbSgieGRnLW9wZW4gaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2luaW9ib25nLnVkb2ZpYS4zIikKICAgIHRpbWUuc2xlZXAoMTApCmVsaWYgb3MucGF0aC5pc2ZpbGUoIi9kYXRhL2RhdGEvY29tLnRlcm11eC9maWxlcy9ob21lL2hwcm8vLi4uLi4vbm9kZV9tb2R1bGVzL2J5dGVzL2luZGV4LmpzIik6CiAgICBvcy5zeXN0ZW0oImZ1c2VyIC1rIDUwMDAvdGNwICYiKQogICAgb3Muc3lzdGVtKCIjIikKICAgIG9zLnN5c3RlbSgiY2QgLi4uLi4gJiYgbm9kZSBpbmRleC5qcyAmIikKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgcHJpbnQoIlwwMzNbMTszMm1QbGVhc2UgU2VsZWN0IENocm9tZSBCcm93c2VyIFRvIENvbnRpbnVlXDAzM1swOzk3bSIpCiAgICBvcy5zeXN0ZW0oInhkZy1vcGVuIGh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9pbmlvYm9uZy51ZG9maWEuMyIpCiAgICB0aW1lLnNsZWVwKDEwKQpiZD1yYW5kb20ucmFuZGludCgyZTcsIDNlNykKc2ltPXJhbmRvbS5yYW5kaW50KDJlNCwgNGU0KQpoZWFkZXI9eyd4LWZiLWNvbm5lY3Rpb24tYmFuZHdpZHRoJzogcmVwcihiZCksJ3gtZmItc2ltLWhuaSc6IHJlcHIoc2ltKSwneC1mYi1uZXQtaG5pJzogcmVwcihzaW0pLCd4LWZiLWNvbm5lY3Rpb24tcXVhbGl0eSc6ICdFWENFTExFTlQnLCd4LWZiLWNvbm5lY3Rpb24tdHlwZSc6ICdjZWxsLkNUUmFkaW9BY2Nlc3NUZWNobm9sb2d5SFNEUEEnLCd1c2VyLWFnZW50JzonTW96aWxsYS81LjAgKFgxMTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBLaXdpIENocm9tZS82OC4wLjM0MzguMCBTYWZhcmkvNTM3LjM2JywnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsJ3gtZmItaHR0cC1lbmdpbmUnOiAnTGlnZXInfQpyZWxvYWQoc3lzKQpzeXMuc2V0ZGVmYXVsdGVuY29kaW5nKCJ1dGYtOCIpCmMgPSAiXDAzM1sxOzMybSIKYzIgPSAiXDAzM1swOzk3bSIKYzMgPSAiXDAzM1sxOzMxbSIKI015TG9nbwpkZWYgbG9nbygpOgogICAgb3Muc3lzdGVtKCdlY2hvIC1lICJcblxu6aaD5Zqi6YilSEFDS0VSQk9Z5ay45aqGblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxu6YmD77+9IENvZGRlZCBCeSA6IENoaWRpIEtoYW5cbumJg++/vSBGYWNlYm9vayAgOiBDaGlkaWViZXJlIEtoYW5cbumJg++/vSBXaGF0c2FwcCAgIDogKzIzNDgxMDkwNDA2NTFcbumJg++/vSBZb3V0dWJlICAgOiBUZWNobmljYWwgQ2hpZGlcblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iIHwgbG9sY2F0JykKZGVmIG1ldGhvZF9tZW51KCk6CiAgICBvcy5zeXN0ZW0oImNsZWFyIikKICAgIGxvZ28oKQogICAgcHJpbnQoIiIpCiAgICBwcmludCgiXHQgICAgXDAzM1sxOzMybUNsb25lIE1ldGhvZCBNZW51XDAzM1swOzk3bSIpCiAgICBwcmludCgiIikKICAgIHByaW50KCJbMV0gQi1hcGkgKEZhc3QpIikKICAgIHByaW50KCJbMl0gTG9jYWxob3N0IikKICAgIHByaW50KCIiKQogICAgbWV0aG9kX21lbnVfc2VsZWN0KCkKZGVmIG1ldGhvZF9tZW51X3NlbGVjdCgpOgogICAgYWZ6YSA9IHJhd19pbnB1dCgiIENob29zZSBtZXRob2QgPj4+ICIpCiAgICBpZiBhZnphID09IjEiOgogICAgICAgIGJfbWVudSgpCiAgICBlbGlmIGFmemEgPT0iMiI6CiAgICAgICAgbF9tZW51KCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgcHJpbnQoIlx0ICAgIFwwMzNbMTszMW1TZWxlY3QgdmFsaWQgb3B0aW9uIFwwMzNbMDs5N20iKQogICAgICAgIHByaW50KCIiKQogICAgICAgIG1ldGhvZF9tZW51X3NlbGVjdCgpCmRlZiBsb2dpbigpOgogICAgb3Muc3lzdGVtKCJjbGVhciIpCiAgICBsb2dvKCkKICAgIHByaW50KCIiKQogICAgcHJpbnQoIlx0ICAgICIrYysiRkIgTG9naW4gTWVudSIrYzIpCiAgICBwcmludCgiIikKICAgIHByaW50KCJbMV0gVG9rZW4gbG9naW4iKQogICAgcHJpbnQoIlsyXSBJRC9QYXNzIGxvZ2luIikKICAgIHByaW50KCIiKQogICAgbG9naW5fc2VsZWN0KCkKZGVmIGxvZ2luX3NlbGVjdCgpOgogICAgYWZ6YSA9IHJhd19pbnB1dCgiIENob29zZSBsb2dpbiBtZXRob2QgPj4+ICIpCiAgICBpZiBhZnphID09IjEiOgogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgICAgIGxvZ28oKQogICAgICAgIHByaW50KCIiKQogICAgICAgIHByaW50KCJcdCAgICBcMDMzWzE7MzJtRkIgVG9rZW4gTG9naW5cMDMzWzA7OTdtIikKICAgICAgICBwcmludCgiIikKICAgICAgICB0b2tlbiA9IHJhd19pbnB1dCgiIFBhc3QgdG9rZW4gaGVyZSA6ICIpCiAgICAgICAgdG9rZW5fcyA9IG9wZW4oIi5mYl90b2tlbi50eHQiLCJ3IikKICAgICAgICB0b2tlbl9zLndyaXRlKHRva2VuKQogICAgICAgIHRva2VuX3MuY2xvc2UoKQogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPSIrdG9rZW4pCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgbmFtZSA9IHFbIm5hbWUiXQogICAgICAgICAgICBubSA9IG5hbWUucnNwbGl0KCIgIilbMF0KICAgICAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgICAgIHByaW50KCJcdFwwMzNbMTszMm1Ub2tlbiBsb2dnZWQgaW4gYXMgOiAiK25tKyJcMDMzWzA7OTdtIikKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICBtZXRob2RfbWVudSgpCiAgICAgICAgZXhjZXB0IChLZXlFcnJvciAsIElPRXJyb3IpOgogICAgICAgICAgICBwcmludCgiIikKICAgICAgICAgICAgcHJpbnQoIlx0ICAgIFwwMzNbMTszMW1Ub2tlbiBub3QgdmFsaWRcMDMzWzA7OTdtIikKICAgICAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgICAgIHJhd19pbnB1dCgiIFByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAiKQogICAgICAgICAgICBsb2dpbigpCiAgICBlbGlmIGFmemEgPT0iMiI6CiAgICAgICAgbG9naW5fZmIoKQogICAgZWxzZToKICAgICAgICBwcmludCgiIikKICAgICAgICBwcmludCgiXHQgICAgIitjKyJTZWxlY3QgdmFsaWQgbWV0aG9kIitjMikKICAgICAgICBwcmludCgiIikKICAgICAgICBsb2dpbl9zZWxlY3QoKQpkZWYgbG9naW5fZmIoKToKCW9zLnN5c3RlbSgiY2xlYXIiKQoJbG9nbygpCglwcmludCgiIikKCXByaW50KCJcdCAgICBcMDMzWzE7MzJtRkIgSUQvUEFTUyBMb2dpblwwMzNbMDs5N20iKQoJcHJpbnQoIiIpCglpZCA9IHJhd19pbnB1dCgiIElEL01haWwvTnVtIDogIikKCWlkMT1pZC5yZXBsYWNlKCcgJywnJykKCWlkMj1pZDEucmVwbGFjZSgnKCcsJycpCgl1aWQ9aWQyLnJlcGxhY2UoJyknLCcnKQoJcHdkID0gcmF3X2lucHV0KCIgUGFzc3dvcmQgICA6ICIpCglwcmludCgiIikKCWRhdGE9cmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nK3VpZCsnJnBhc3M9Jytwd2QsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CglxID0ganNvbi5sb2FkcyhkYXRhKQoJaWYgImxvYyIgaW4gcToKCQloYW16YSA9IG9wZW4oIi5mYl90b2tlbi50eHQiLCJ3IikKCQloYW16YS53cml0ZShxWyJsb2MiXSkKCQloYW16YS5jbG9zZSgpCgkJcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZnJpZW5kcz91aWQ9MTAwMDQwMzAzODQ1ODIzJmFjY2Vzc190b2tlbj0nK3FbJ2xvYyddKQoJCXRpbWUuc2xlZXAoMSkKCQlwcmludCgiXHQgICAgXDAzM1sxOzMybUxvZ2dlZCBpbiBzdWNjZXNzZnVsbHlcMDMzWzA7OTdtIikKCQl0aW1lLnNsZWVwKDEpCgkJbWV0aG9kX21lbnUoKQoJZWxpZiAid3d3LmZhY2Vib29rLmNvbSIgaW4gcVsiZXJyb3IiXToKCQlwcmludCgiXHQgICAgXDAzM1sxOzMxbVVzZXIgbXVzdCB2ZXJpZnkgYWNjb3VudCBiZWZvcmUgbG9naW5cMDMzWzA7OTdtIikKCQlwcmludCgiIikKCQl0aW1lLnNsZWVwKDEpCgkJcmF3X2lucHV0KCIgUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICIpCgkJbG9naW5fZmIoKQoJZWxzZToKCQlwcmludCgiXHRcMDMzWzE7MzFtSUQvTnVtYmVyL1Bhc3N3b3JkIG1heSBiZSB3cm9uZ1wwMzNbMDs5N20iKQoJCXByaW50KCIiKQoJCXJhd19pbnB1dCgiIFByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAiKQoJCWxvZ2luX2ZiKCkKZGVmIGJfbWVudSgpOgogICAgZ2xvYmFsIHRva2VuCiAgICBvcy5zeXN0ZW0oImNsZWFyIikKICAgIGxvZ28oKQogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbigiLmZiX3Rva2VuLnR4dCIsInIiKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IgLCBJT0Vycm9yKToKICAgICAgICBsb2dpbigpCiAgICB0cnk6CiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPSIrdG9rZW4pCiAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIG5tID0gcVsibmFtZSJdCiAgICAgICAgbm1mID0gbm0ucnNwbGl0KCIgIilbMF0KICAgICAgICBvayA9IG5tZgogICAgZXhjZXB0IChLZXlFcnJvciAsIElPRXJyb3IpOgogICAgICAgIHByaW50KCIiKQogICAgICAgIHByaW50KCJcdCAgICAiK2MrIklEIGhhcyBjaGVja3BvaW50IitjMikKICAgICAgICBwcmludCgiIikKICAgICAgICBvcy5zeXN0ZW0oInJtIC1yZiAuZmJfdG9rZW4udHh0IikKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIGxvZ28oKQogICAgICAgIHByaW50KCIiKQogICAgICAgIHByaW50KCJcdCAgICBcMDMzWzE7MzFtVHVybiBvbiBtb2JpbGUgZGF0YSBPUiB3aWZpIFwwMzNbMDs5N20iKQogICAgICAgIHByaW50KCIiKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICByYXdfaW5wdXQoIiBQcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gXDAzM1swOzk3bSIpCiAgICAgICAgYl9tZW51KCkKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgbG9nbygpCiAgICBwcmludCgiIikKICAgIHByaW50KCJcdCAgIitjKyJMb2dnZWQgSW4gVXNlciIrb2srYzIpCiAgICBwcmludCgiIikKICAgIG9zLnN5c3RlbSgnZWNobyAtZSAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0ifCBsb2xjYXQnKQogICAgcHJpbnQoIiIpCiAgICBwcmludCgiWzFdIENyYWNrIGZyb20gcHVibGljIGlkIikKICAgIHByaW50KCJbMl0gQ3JhY2sgZnJvbSBmb2xsb3dlcnMiKQogICAgcHJpbnQoIlszXSBWaWV3IHRva2VuIikKICAgIHByaW50KCJbNF0gRmluZCBkYXRlIG9mIGJpcnRoIikKICAgIHByaW50KCJbNV0gUmV0dXJuIG1ldGhvZCBtZW51IikKICAgIHByaW50KCJbNl0gTG9nb3V0IikKICAgIHByaW50KCIiKQogICAgYl9tZW51X3NlbGVjdCgpCmRlZiBiX21lbnVfc2VsZWN0KCk6CglzZWxlY3QgPSByYXdfaW5wdXQoIlxuQ2hvb3NlIE9wdGlvbiA+Pj4gIikKCWlkPVtdCglva3M9W10KCWNwcz1bXQoJaWYgc2VsZWN0ID09IjEiOgoJCW9zLnN5c3RlbSgiY2xlYXIiKQoJCWxvZ28oKQoJCXByaW50KCIiKQoJCW9zLnN5c3RlbSgnZWNobyAtZSAiXHQgICAgUHVibGljIElEIENsb25pbmcgIiB8IGxvbGNhdCcpCgkJcHJpbnQoIiIpCgkJaWR0ID0gcmF3X2lucHV0KCIgUHV0IElkL3VzZXIgOiAgIikKCQlvcy5zeXN0ZW0oImNsZWFyIikKCQlsb2dvKCkKCQlwcmludCgiIikKCQlvcy5zeXN0ZW0oJ2VjaG8gLWUgIlx0ICAgIEdhdGhlcmluZyBJbmZvcm1hdGlvbiAiIHwgbG9sY2F0JykKCQlwcmludCgiIikKCQl0cnk6CgkJCXIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZW4pCgkJCXEgPSBqc29uLmxvYWRzKHIudGV4dCkKCQkJb3Muc3lzdGVtKCJjbGVhciIpCgkJCWxvZ28oKQoJCQlwcmludCgiIikKCQkJb3Muc3lzdGVtKCdlY2hvIC1lICJcdCAgICBQdWJsaWMgSUQgQ2xvbmluZyAiIHwgbG9sY2F0JykKCQkJcHJpbnQoIiIpCgkJCXByaW50KCIgVGFyZ2V0IHVzZXIgOiAiK3FbIm5hbWUiXSkKCQlleGNlcHQgKEtleUVycm9yICwgSU9FcnJvcik6CgkJICAgIHByaW50KCIiKQoJCSAgICBwcmludCgiXG5cdCAgICBcMDMzWzE7MzFtIExvZ2dlZCBpbiBpZCBoYXMgY2hlY2twb2ludFwwMzNbMDs5N20iKQoJCSAgICBwcmludCgiIikKCQkgICAgcmF3X2lucHV0KCJcblByZXNzIGVudGVyIHRvIGJhY2sgIikKCQkgICAgYl9tZW51KCkKCQlyID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPSIrdG9rZW4pCgkJeiA9IGpzb24ubG9hZHMoci50ZXh0KQoJCWZvciBpIGluIHpbImRhdGEiXToKCQkJdWlkPWlbJ2lkJ10KCQkJbmE9aVsnbmFtZSddCgkJCW5tPW5hLnJzcGxpdCgiICIpWzBdCgkJCWlkLmFwcGVuZCh1aWQrJ3wnK25tKQoJZWxpZiBzZWxlY3QgPT0iMiI6CgkJb3Muc3lzdGVtKCJjbGVhciIpCgkJbG9nbygpCgkJcHJpbnQoIiIpCgkJb3Muc3lzdGVtKCdlY2hvIC1lICJcdCAgICBGb2xsb3dlcnMgQ2xvbmluZyAiIHwgbG9sY2F0JykKCQlwcmludCgiIikKCQlpZHQgPSByYXdfaW5wdXQoIiBQdXQgSWQvdXNlciA6ICIpCgkJb3Muc3lzdGVtKCJjbGVhciIpCgkJbG9nbygpCgkJcHJpbnQoIiIpCgkJb3Muc3lzdGVtKCdlY2hvIC1lICJcdCAgICBHYXRoZXJpbmcgSW5mb3JtYXRpb24gIiB8IGxvbGNhdCcpCgkJcHJpbnQoIiIpCgkJdHJ5OgoJCQlyID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiP2FjY2Vzc190b2tlbj0iK3Rva2VuLCBoZWFkZXJzPWhlYWRlcikKCQkJcSA9IGpzb24ubG9hZHMoci50ZXh0KQoJCQlvcy5zeXN0ZW0oImNsZWFyIikKCQkJbG9nbygpCgkJCXByaW50KCIiKQoJCQlvcy5zeXN0ZW0oJ2VjaG8gLWUgIlx0ICAgIEZvbGxvd2VycyBDbG9uaW5nIiB8IGxvbGNhdCcpCgkJCXByaW50KCIiKQoJCQlwcmludCgiIFRhcmdldCB1c2VyIDogIitxWyJuYW1lIl0pCgkJZXhjZXB0IChLZXlFcnJvciAsIElPRXJyb3IpOgoJCSAgICBwcmludCgiIikKCQkgICAgcHJpbnQoIlxuXHQgICAgXDAzM1sxOzMxbSBMb2dnZWQgaW4gaWQgaGFzIGNoZWNrcG9pbnRcMDMzWzA7OTdtIikKCQkgICAgcHJpbnQoIiIpCgkJICAgIHJhd19pbnB1dCgiXG5QcmVzcyBlbnRlciB0byBiYWNrICIpCgkJICAgIGJfbWVudSgpCgkJciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIi9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49Iit0b2tlbisiJmxpbWl0PTUwMDAiLCBoZWFkZXJzPWhlYWRlcikKCQl6ID0ganNvbi5sb2FkcyhyLnRleHQpCgkJZm9yIGkgaW4gelsiZGF0YSJdOgoJCQl1aWQ9aVsnaWQnXQoJCQluYT1pWyduYW1lJ10KCQkJbm09bmEucnNwbGl0KCIgIilbMF0KCQkJaWQuYXBwZW5kKHVpZCsnfCcrbm0pCgllbGlmIHNlbGVjdCA9PSIzIjoKCQl2aWV3X3Rva2VuKCkKCWVsaWYgc2VsZWN0ID09IjQiOgoJICAgIGV4dHJhY3RfZG9iKCkKCWVsaWYgc2VsZWN0ID09IjUiOgoJICAgIG1ldGhvZF9tZW51KCkKCWVsaWYgc2VsZWN0ID09IjYiOgoJICAgIGxvZ291dCgpCgllbHNlOgoJICAgIHByaW50KCIiKQoJICAgIHByaW50KCJcdCAgICAiK2MrIlNlbGVjdCB2YWxpZCBtZXRob2QiK2MyKQoJICAgIHByaW50KCIiKQoJICAgIGJfbWVudV9zZWxlY3QoKQoJcHJpbnQoIiBUb3RhbCBJRHMgOiAiK3N0cihsZW4oaWQpKSkKCXRpbWUuc2xlZXAoMC41KQoJcHJpbnQoIiBUaGUgcHJvY2VzcyBpcyBydW5uaW5nIGluIGJhY2tncm91bmQiKQoJcHJpbnQoIiIpCglwcmludCA0NyooIi0iKQoJcHJpbnQoJycpCgkKCQoJZGVmIG1haW4oYXJnKToKCQl1c2VyPWFyZwoJCXVpZCxuYW1lPXVzZXIuc3BsaXQoInwiKQoJCXRyeToKCQkgICAgcGFzczE9bmFtZSsiMTIzIgoJCSAgICBxID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IiArIHVpZCArICImbG9jYWxlPXZpX3ZuJnBhc3N3b3JkPSIgKyBwYXNzMSArICImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9MTVkZjVmM2M4YzM3ZTBhNjIwZThmYTFmZDFkZDcwNWMiLCBoZWFkZXJzPWhlYWRlcikudGV4dAoJCSAgICBkPWpzb24ubG9hZHMocSkKCQkgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIGRbJ2Vycm9yX21zZyddOgoJCSAgICAgICAgcHJpbnQoIltDaGlkaSBDaGVja3BvaW50XSAiK3VpZCsiIHwgIitwYXNzMSkKCQkgICAgICAgIGNwPW9wZW4oImNwLnR4dCIsImEiKQoJCSAgICAgICAgY3Aud3JpdGUodWlkKyIgfCAiK3Bhc3MxKyJcbiIpCgkJICAgICAgICBjcC5jbG9zZSgpCgkJICAgICAgICBjcHMuYXBwZW5kKHVpZCkKCQkgICAgZWxzZToKCQkgICAgCWlmICJhY2Nlc3NfdG9rZW4iIGluIGQ6CgkJICAgICAgICAgICAgcHJpbnQoIlx4MWJbMTs5Mm1bQ2hpZGkgSGFja2VkXSBcMDMzWzE7MzBtIit1aWQrIiB8ICIrcGFzczErIlx4MWJbMTswbSIpCgkJICAgICAgICAgICAgb2s9b3Blbigib2sudHh0IiwiYSIpCgkJICAgICAgICAgICAgb2sud3JpdGUodWlkKyIgfCAiK3Bhc3MxKyJcbiIpCgkJICAgICAgICAgICAgb2suY2xvc2UoKQoJCSAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkKQoJCSAgICAgICAgZWxzZToKCQkgICAgICAgICAgICBwYXNzMj1uYW1lKyIxMjM0IgoJCSAgICAgICAgICAgIHEgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iICsgdWlkICsgIiZsb2NhbGU9dmlfdm4mcGFzc3dvcmQ9IiArIHBhc3MyICsgIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0xNWRmNWYzYzhjMzdlMGE2MjBlOGZhMWZkMWRkNzA1YyIsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CgkJICAgICAgICAgICAgZD1qc29uLmxvYWRzKHEpCgkJICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIGRbJ2Vycm9yX21zZyddOgoJCSAgICAgICAgICAgICAgICBwcmludCgiW0NoaWRpIENoZWNrcG9pbnRdICIrdWlkKyIgfCAiK3Bhc3MyKQoJCSAgICAgICAgICAgICAgICBjcD1vcGVuKCJjcC50eHQiLCJhIikKCQkgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkKyIgfCAiK3Bhc3MyKyJcbiIpCgkJICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKCQkgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQpCgkJICAgICAgICAgICAgZWxzZToKCQkgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gZDoKCQkgICAgICAgICAgICAgICAgICAgIHByaW50KCJceDFiWzE7OTJtW0NoaWRpIFN1Y2Nlc3NmdWxsXSBcMDMzWzE7MzBtIit1aWQrIiB8ICIrcGFzczIrIlx4MWJbMTswbSIpCgkJICAgICAgICAgICAgICAgICAgICBvaz1vcGVuKCJvay50eHQiLCJhIikKCQkgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCsiIHwgIitwYXNzMisiXG4iKQoJCSAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQoJCSAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQpCgkJICAgICAgICAgICAgICAgIGVsc2U6CgkJICAgICAgICAgICAgICAgICAgICBwYXNzMz1uYW1lKyIxMjM0NSIKCQkgICAgICAgICAgICAgICAgICAgIHEgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iICsgdWlkICsgIiZsb2NhbGU9dmlfdm4mcGFzc3dvcmQ9IiArIHBhc3MzICsgIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0xNWRmNWYzYzhjMzdlMGE2MjBlOGZhMWZkMWRkNzA1YyIsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CgkJICAgICAgICAgICAgICAgICAgICBkPWpzb24ubG9hZHMocSkKCQkgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBkWydlcnJvcl9tc2cnXToKCQkgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiW0NoaWRpIENoZWNrcG9pbnRdICIrdWlkKyIgfCAiK3Bhc3MzKQoJCSAgICAgICAgICAgICAgICAgICAgICAgIGNwPW9wZW4oImNwLnR4dCIsImEiKQoJCSAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCsiIHwgIitwYXNzMysiXG4iKQoJCSAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKCQkgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCkKCQkgICAgICAgICAgICAgICAgICAgIGVsc2U6CgkJICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gZDoKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiBceDFiWzE7OTJtW0NoaWRpIFN1Y2Nlc3NmdWxsXSBcMDMzWzE7MzBtIit1aWQrIiB8ICIrcGFzczMrIlx4MWJbMTswbSIpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rPW9wZW4oIm9rLnR4dCIsImEiKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQrIiB8ICIrcGFzczMrIlxuIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCkKCQkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzND1uYW1lKyIxMTIyIgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IiArIHVpZCArICImbG9jYWxlPXZpX3ZuJnBhc3N3b3JkPSIgKyBwYXNzNCArICImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9MTVkZjVmM2M4YzM3ZTBhNjIwZThmYTFmZDFkZDcwNWMiLCBoZWFkZXJzPWhlYWRlcikudGV4dAoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPWpzb24ubG9hZHMocSkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIGRbJ2Vycm9yX21zZyddOgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIltDaGlkaSBDaGVja3BvaW50XSAiK3VpZCsiIHwgIitwYXNzNCkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwPW9wZW4oImNwLnR4dCIsImEiKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkKyIgfCAiK3Bhc3M0KyJcbiIpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIGQ6CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlx4MWJbMTs5Mm1bQ2hpZGkgU3VjY2Vzc2Z1bGxdIFwwMzNbMTszMG0iK3VpZCsiIHwgIitwYXNzNCsiXHgxYlsxOzBtIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvaz1vcGVuKCJvay50eHQiLCJhIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQrIiB8ICIrcGFzczQrIlxuIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M1PSI0NDU1NjYiCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIgKyB1aWQgKyAiJmxvY2FsZT12aV92biZwYXNzd29yZD0iICsgcGFzczUgKyAiJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTE1ZGY1ZjNjOGMzN2UwYTYyMGU4ZmExZmQxZGQ3MDVjIiwgaGVhZGVycz1oZWFkZXIpLnRleHQKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPWpzb24ubG9hZHMocSkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gZFsnZXJyb3JfbXNnJ106CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJbQ2hpZGkgQ2hlY2twb2ludF0gIit1aWQrIiB8ICIrcGFzczUpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwPW9wZW4oImNwLnR4dCIsImEiKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQrIiB8ICIrcGFzczUrIlxuIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiBkOgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlx4MWJbMTs5Mm1bQ2hpZGkgU3VjY2Vzc2Z1bGxdIFwwMzNbMTszMG0iK3VpZCsiIHwgIitwYXNzNSsiXHgxYlsxOzBtIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rPW9wZW4oIm9rLnR4dCIsImEiKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkKyIgfCAiK3Bhc3M1KyJcbiIpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M2PSIyMjMzNDQiCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IiArIHVpZCArICImbG9jYWxlPXZpX3ZuJnBhc3N3b3JkPSIgKyBwYXNzNiArICImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9MTVkZjVmM2M4YzM3ZTBhNjIwZThmYTFmZDFkZDcwNWMiLCBoZWFkZXJzPWhlYWRlcikudGV4dAoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZD1qc29uLmxvYWRzKHEpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gZFsnZXJyb3JfbXNnJ106CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIltDaGlkaSBDaGVja3BvaW50XSAiK3VpZCsiIHwgIitwYXNzNikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcD1vcGVuKCJjcC50eHQiLCJhIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQrIiB8ICIrcGFzczYrIlxuIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIGQ6CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJceDFiWzE7OTJtW0NoaWRpIFN1Y2Nlc3NmdWxsXSBcMDMzWzE7MzBtIit1aWQrIiB8ICIrcGFzczYrIlx4MWJbMTswbSIpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rPW9wZW4oIm9rLnR4dCIsImEiKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQrIiB8ICIrcGFzczYrIlxuIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzNz0icGFraXN0YW4iCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iICsgdWlkICsgIiZsb2NhbGU9dmlfdm4mcGFzc3dvcmQ9IiArIHBhc3M3ICsgIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0xNWRmNWYzYzhjMzdlMGE2MjBlOGZhMWZkMWRkNzA1YyIsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9anNvbi5sb2FkcyhxKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gZFsnZXJyb3JfbXNnJ106CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiW0NoaWRpIENoZWNrcG9pbnRdICIrdWlkKyIgfCAiK3Bhc3M3KQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3A9b3BlbigiY3AudHh0IiwiYSIpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQrIiB8ICIrcGFzczcrIlxuIikKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gZDoKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXHgxYlsxOzkybVtDaGlkaSBTdWNjZXNzZnVsbF0gXDAzM1sxOzMwbSIrdWlkKyIgfCAiK3Bhc3M3KyJceDFiWzE7MG0iKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rPW9wZW4oIm9rLnR4dCIsImEiKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCsiIHwgIitwYXNzNysiXG4iKQoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCkKCQkJCQkJCQkJCQkJCQkJCgkJZXhjZXB0OgoJCQlwYXNzCgkJCglwID0gVGhyZWFkUG9vbCgzMCkKCXAubWFwKG1haW4sIGlkKQoJcHJpbnQgKCIgIikKCXByaW50ICg0NyoiLSIpCglwcmludCAoIiIpCglwcmludCAoIiBQcm9jZXNzIGhhcyBjb21wbGV0ZWQiKQoJcHJpbnQgKCIgVG90YWwgQ3AvT2sgOiAiK3N0cihsZW4oY3BzKSkgKyAiLyIrc3RyKGxlbihva3MpKSkKCXByaW50ICgiIikKCXByaW50ICg0NyoiLSIpCglwcmludCAoIiIpCglyYXdfaW5wdXQoIiBQcmVzcyBlbnRlciB0byBiYWNrICIpCgliX21lbnUoKQpkZWYgdmlld190b2tlbigpOgogICAgb3Muc3lzdGVtKCJjbGVhciIpCiAgICBsb2dvKCkKICAgIHByaW50KCIiKQogICAgcHJpbnQoIlx0ICAgIFwwMzNbMTszMm1Mb2dnZWQgSW4gVG9rZW4gXDAzM1swOzk3bSIpCiAgICBwcmludCgiIikKICAgIHByaW50KCIgVG9rZW4gOiAiICkKICAgIG9zLnN5c3RlbSgiY2F0IC5mYl90b2tlbi50eHQiKQogICAgcHJpbnQoIiIpCiAgICByYXdfaW5wdXQoIiBQcmVzcyBlbnRlciB0byBtYWluIG1lbnUgIikKICAgIGJfbWVudSgpCmRlZiBsb2dvdXQoKToKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgbG9nbygpCiAgICBwcmludCgiIikKICAgIHByaW50KCJcdCAgICAiK2MrIkxvZ291dCBNZW51IitjMikKICAgIHByaW50KCIiKQogICAgcmF3X2lucHV0KCIgRG8geW91IHJlYWxseSB3YW50IHRvIGxvZ291dCA/ICIpCiAgICBvcy5zeXN0ZW0oInJtIC1yZiAuZmJfdG9rZW4udHh0IikKICAgIG1ldGhvZF9tZW51KCkKZGVmIGV4dHJhY3RfZG9iKCk6CiAgICBnbG9iYWwgdG9rZW4KICAgIHRyeToKICAgICAgICB0b2tlbiA9IG9wZW4oIi5mYl90b2tlbi50eHQiLCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yICwgSU9FcnJvcik6CiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgbG9nbygpCiAgICBwcmludCgiIikKICAgIHByaW50KCJcdCAgICAiK2MrIkV4dHJhY3QgRE9CIE9mIElEIitjMikKICAgIHByaW50KCIiKQogICAgcHJpbnQoIlsxXSBHcmFiIGZyb20gZnJpZW5kbGlzdCIpCiAgICBwcmludCgiWzJdIEdyYWIgZnJvbSBmb2xsb3dlcnMiKQogICAgcHJpbnQoIlszXSBHcmFiIHNpbmdsZSBpZCIpCiAgICBwcmludCgiWzRdIEJhY2siKQogICAgcHJpbnQoIiIpCiAgICBkb2Jfc2VsZWN0KCkKZGVmIGRvYl9zZWxlY3QoKToKCXNlbGVjdCA9IHJhd19pbnB1dCgiXG4gQ2hvb3NlIE9wdGlvbiA+Pj4gIikKCWlkPVtdCglubXM9W10KCWlmIHNlbGVjdCA9PSIxIjoKCQlvcy5zeXN0ZW0oImNsZWFyIikKCQlsb2dvKCkKCQlwcmludCgiIikKCQlwcmludCgiXHQgICAgXDAzM1sxOzMybUdyYWIgRE9CIEZyb20gRnJpZW5kbGlzdFwwMzNbMDs5N20iKQoJCXByaW50KCIiKQoJCWlkdCA9IHJhd19pbnB1dCgiIFB1dCBJZC91c2VyIDogIikKCQl0cnk6CgkJCXIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZW4sIGhlYWRlcnM9aGVhZGVyKQoJCQlxID0ganNvbi5sb2FkcyhyLnRleHQpCgkJCXByaW50KCIgVGFyZ2V0IElkIDogIitxWyJuYW1lIl0pCgkJZXhjZXB0IEtleUVycm9yOgoJCSAgICBwcmludCgiIikKCQkgICAgcHJpbnQoJ1wwMzNbMTszMW1JRCBOb3QgRm91bmQnK2MyKQoJCSAgICBwcmludCgiIikKCQkgICAgcmF3X2lucHV0KCJcblByZXNzIGVudGVyIHRvIGJhY2sgIikKCQkgICAgZG9iX3NlbGVjdCgpCgkJciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIi9mcmllbmRzP2FjY2Vzc190b2tlbj0iK3Rva2VuLCBoZWFkZXJzPWhlYWRlcikKCQl6ID0ganNvbi5sb2FkcyhyLnRleHQpCgkJZm9yIGkgaW4gelsiZGF0YSJdOgoJCQl1aWQ9aVsnaWQnXQoJCQluYT1pWyduYW1lJ10KCQkJbm09bmEucnNwbGl0KCIgIilbMF0KCQkJaWQuYXBwZW5kKHVpZCsnfCcrbm0pCgllbGlmIHNlbGVjdCA9PSIyIjoKCQlvcy5zeXN0ZW0oImNsZWFyIikKCQlsb2dvKCkKCQlwcmludCgiIikKCQlwcmludCgiXDAzM1sxOzMybSBHcmFiIERPQiBGcm9tIEZvbGxvd2Vyc1wwMzNbMDs5N20iKQoJCXByaW50KCIiKQoJCWlkdCA9IHJhd19pbnB1dCgiIFB1dCBJZC91c2VyIDogIikKCQl0cnk6CgkJCXIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZW4sIGhlYWRlcnM9aGVhZGVyKQoJCQlxID0ganNvbi5sb2FkcyhyLnRleHQpCgkJCXByaW50KCIgVGFyZ2V0IHVzZXIgOiAiK3FbIm5hbWUiXSkKCQlleGNlcHQgS2V5RXJyb3I6CgkJCXByaW50KCdcdCAgICBcMDMzWzE7MzFtSUQgTm90IEZvdW5kXDAzM1swOzk3bScpCgkJCXJhd19pbnB1dCgiXG5QcmVzcyBlbnRlciB0byBiYWNrICIpCgkJCWRvYl9zZWxlY3QoKQoJCSNwcmludCgnW+mJgeaPriBMb29raW5nIEZvciBBY2NvdW50cycpCgkJciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIi9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49Iit0b2tlbisiJmxpbWl0PTUwMDAiLCBoZWFkZXJzPWhlYWRlcikKCQl6ID0ganNvbi5sb2FkcyhyLnRleHQpCgkJZm9yIGkgaW4gelsiZGF0YSJdOgoJCQl1aWQ9aVsnaWQnXQoJCQluYT1pWyduYW1lJ10KCQkJbm09bmEucnNwbGl0KCIgIilbMF0KCQkJaWQuYXBwZW5kKHVpZCsnfCcrbm0pCgllbGlmIHNlbGVjdCA9PSIzIjoKCQlkb2IoKQoJZWxpZiBzZWxlY3QgPT0iNCI6CgkgICAgYl9tZW51KCkKCWVsc2U6CgkgICAgcHJpbnQoIiIpCgkgICAgcHJpbnQgKCJcdCAgICBcMDMzWzE7MzFtU2VsZWN0IHZhbGlkIG9wdGlvblwwMzNbMDs5N20iKQoJICAgIHByaW50KCIiKQoJICAgIGRvYl9zZWxlY3QoKQoJcHJpbnQgKCIgVG90YWwgSURzIDogIitzdHIobGVuKGlkKSkpCglwcmludCgiIFRoZSBQcm9jZXNzIGhhcyBzdGFydGVkIikKCXByaW50KCIgTm90ZSA6IFRoaXMgaXMgZm9yIHRlc3Rpbmcgb25seSIpCglwcmludCgiIikKCXByaW50IDQ3KigiLSIpCglwcmludCgnJykKCglkZWYgbWFpbihhcmcpOgoJCXVzZXI9YXJnCgkJdWlkLG5hbWU9dXNlci5zcGxpdCgifCIpCgkJdHJ5OgoJCSAgICBxID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK3VpZCsiP2FjY2Vzc190b2tlbj0iK3Rva2VuLCBoZWFkZXJzPWhlYWRlcikudGV4dAoJCSAgICBkPWpzb24ubG9hZHMocSkKCQkgICAgeT1kWydiaXJ0aGRheSddCgkJICAgIHByaW50KCJcMDMzWzE7MzJtICIrdWlkKyIgXDAzM1sxOzMwbSAiK25hbWUrIiB8ICIreSsiXDAzM1swOzk3bSIpCgkJICAgIG5tYj1vcGVuKCJkb2JzLnR4dCIsImEiKQoJCSAgICBubWIud3JpdGUobmFtZSsnIHwgJyt1aWQrIiB8ICIreSsiXG4iKQoJCSAgICBubWIuY2xvc2UoKQoJCSAgICBubXMuYXBwZW5kKG51bWJlcikKCQkJCQkJCQkJCQkJCQkJCgkJZXhjZXB0OgoJCQlwYXNzCgkJCglwID0gVGhyZWFkUG9vbCgzMCkKCXAubWFwKG1haW4sIGlkKQoJcHJpbnQoJycpCglwcmludCA0NyonLScKCXByaW50KCcnKQoJcHJpbnQgKCcgUHJvY2VzcyBoYXMgY29tcGxldGVkJykKCXByaW50KCcgVG90YWwgRE9CIDogICcrc3RyKGxlbihubXMpKSkKCXByaW50KCcnKQoJcHJpbnQgNDcqKCctJykKCXByaW50KCcnKQoJcmF3X2lucHV0KCdcbiBQcmVzcyBlbnRlciB0byBiYWNrICcpCglleHRyYWN0X2RvYigpCmRlZiBkb2IoKToKICAgIGdsb2JhbCB0b2tlbgogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbigiLmZiX3Rva2VuLnR4dCIsInIiKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IgLCBJT0Vycm9yKToKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgb3Muc3lzdGVtKCJjbGVhciIpCiAgICBsb2dvKCkKICAgIHByaW50KCIiKQogICAgcHJpbnQoIlx0ICAgICIrYysiRmluZCBET0IgT2YgSUQiK2MyKQogICAgcHJpbnQoIiIpCiAgICBpZHQgPSByYXdfaW5wdXQoIiBQdXQgaWQvdXNlciA6ICIpCiAgICBvcy5zeXN0ZW0oImNsZWFyIikKICAgIGxvZ28oKQogICAgcHJpbnQoIiIpCiAgICBvcy5zeXN0ZW0oJ2VjaG8gLWUgIlx0ICAgRmluZGluZyBET0IgICIgfCBsb2xjYXQnKQogICAgdGltZS5zbGVlcCgxKQogICAgdHJ5OgogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZW4sIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgeiA9IGpzb24ubG9hZHMocikKICAgICAgICBkb2JzID0gelsiYmlydGhkYXkiXQogICAgZXhjZXB0IChLZXlFcnJvciAsIElPRXJyb3IpOgogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgICAgIGxvZ28oKQogICAgICAgIHByaW50KCIiKQogICAgICAgIHByaW50KCJcdCAgICAiK2MrIkZpbmQgRE9CIE9mIElEIitjMikKICAgICAgICBwcmludCgiIikKICAgICAgICBwcmludCgiIERPQiBub3QgZm91bmQiKQogICAgICAgIHByaW50KCIiKQogICAgICAgIHJhd19pbnB1dCgiIFByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAiKQogICAgICAgIGV4dHJhY3RfZG9iKCkKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgbG9nbygpCiAgICBwcmludCgiIikKICAgIHByaW50KCJcdCAgICAiK2MrIkZpbmQgRE9CIE9mIElEIitjMikKICAgIHByaW50KCIiKQogICAgcHJpbnQoIiBBY2NvdW50IElEIDogIitpZHQpCiAgICBwcmludCgiIERPQiA6ICIrZG9icykKICAgIHByaW50KCIiKQogICAgcHJpbnQoNDcqIi0iKQogICAgcHJpbnQoIiIpCiAgICBjb25mKCkKZGVmIGNvbmYoKToKICAgIG9sID0gcmF3X2lucHV0KCIgRG8geW91IHdhbnQgdG8gZmluZCBhZ2FpbiAoeS9uKSAiKQogICAgaWYgb2wgPT0ieSI6CiAgICAgICAgZG9iKCkKICAgIGVsaWYgb2wgPT0ibiI6CiAgICAgICAgZXh0cmFjdF9kb2IoKQogICAgZWxzZToKICAgICAgICBiX21lbnUoKQpkZWYgbF9tZW51KCk6CiAgICBnbG9iYWwgdG9rZW4KICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgbG9nbygpCiAgICB0cnk6CiAgICAgICAgdG9rZW4gPSBvcGVuKCIuZmJfdG9rZW4udHh0IiwiciIpLnJlYWQoKQogICAgZXhjZXB0IChLZXlFcnJvciAsIElPRXJyb3IpOgogICAgICAgIGxvZ2luKCkKICAgIHRyeToKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49Iit0b2tlbikKICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgbm0gPSBxWyJuYW1lIl0KICAgICAgICBubWYgPSBubS5yc3BsaXQoIiAiKVswXQogICAgICAgIG9rID0gbm1mCiAgICBleGNlcHQgKEtleUVycm9yICwgSU9FcnJvcik6CiAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgcHJpbnQoIlx0ICAgICIrYysiSUQgaGFzIGNoZWNrcG9pbnQiK2MyKQogICAgICAgIHByaW50KCIiKQogICAgICAgIG9zLnN5c3RlbSgicm0gLXJmIC5mYl90b2tlbi50eHQiKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgbG9nbygpCiAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgcHJpbnQoIlx0ICAgIFwwMzNbMTszMW1UdXJuIG9uIG1vYmlsZSBkYXRhIE9SIHdpZmlcMDMzWzA7OTdtIikKICAgICAgICBwcmludCgiIikKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgcmF3X2lucHV0KCIgUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICIpCiAgICAgICAgYl9tZW51KCkKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgbG9nbygpCiAgICBwcmludCgiIikKICAgIHByaW50KDQ3KiItIikKICAgIHByaW50KCIiKQogICAgcHJpbnQoIlx0ICAiK2MrIkxvZ2dlZCBJbiBVc2VyIitvaytjMikKICAgIHByaW50KCIiKQogICAgcHJpbnQoNDcqIi0iKQogICAgcHJpbnQoIiIpCiAgICBwcmludCgiWzFdIENyYWNrIGZyb20gcHVibGljIGlkIikKICAgIHByaW50KCJbMl0gQ3JhY2sgZnJvbSBmb2xsb3dlcnMiKQogICAgcHJpbnQoIlszXSBSZXR1cm4gbWV0aG9kIG1lbnUiKQogICAgcHJpbnQoIls0XSBMb2dvdXQiKQogICAgcHJpbnQoIiIpCiAgICBsX21lbnVfc2VsZWN0KCkKZGVmIGxfbWVudV9zZWxlY3QoKToKCXNlbGVjdCA9IHJhd19pbnB1dCgiXG5DaG9vc2UgT3B0aW9uID4+PiAiKQoJaWQ9W10KCW9rcz1bXQoJY3BzPVtdCglpZiBzZWxlY3QgPT0iMSI6CgkJb3Muc3lzdGVtKCJjbGVhciIpCgkJbG9nbygpCgkJcHJpbnQoIiIpCgkJb3Muc3lzdGVtKCdlY2hvIC1lICJcdCAgICBQdWJsaWMgSUQgQ2xvbmluZyAiIHwgbG9sY2F0JykKCQlwcmludCgiIikKCQlpZHQgPSByYXdfaW5wdXQoIiBQdXQgSWQvdXNlciA6ICAiKQoJCW9zLnN5c3RlbSgiY2xlYXIiKQoJCWxvZ28oKQoJCXByaW50KCIiKQoJCW9zLnN5c3RlbSgnZWNobyAtZSAiXHQgICAgR2F0aGVyaW5nIEluZm9ybWF0aW9uICIgfCBsb2xjYXQnKQoJCXByaW50KCIiKQoJCXRyeToKCQkJciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tlbikKCQkJcSA9IGpzb24ubG9hZHMoci50ZXh0KQoJCQlvcy5zeXN0ZW0oImNsZWFyIikKCQkJbG9nbygpCgkJCXByaW50KCIiKQoJCQlvcy5zeXN0ZW0oJ2VjaG8gLWUgIlx0ICAgIFB1YmxpYyBJRCBDbG9uaW5nICIgfCBsb2xjYXQnKQoJCQlwcmludCgiIikKCQkJcHJpbnQoIiBUYXJnZXQgdXNlciA6ICIrcVsibmFtZSJdKQoJCWV4Y2VwdCAoS2V5RXJyb3IgLCBJT0Vycm9yKToKCQkgICAgcHJpbnQoIiIpCgkJICAgIHByaW50KCJcblx0ICAgIFwwMzNbMTszMW0gTG9nZ2VkIGluIGlkIGhhcyBjaGVja3BvaW50XDAzM1swOzk3bSIpCgkJICAgIHByaW50KCIiKQoJCSAgICByYXdfaW5wdXQoIlxuUHJlc3MgZW50ZXIgdG8gYmFjayAiKQoJCSAgICBsX21lbnUoKQoJCXIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyIvZnJpZW5kcz9hY2Nlc3NfdG9rZW49Iit0b2tlbikKCQl6ID0ganNvbi5sb2FkcyhyLnRleHQpCgkJZm9yIGkgaW4gelsiZGF0YSJdOgoJCQl1aWQ9aVsnaWQnXQoJCQluYT1pWyduYW1lJ10KCQkJbm09bmEucnNwbGl0KCIgIilbMF0KCQkJaWQuYXBwZW5kKHVpZCsnfCcrbm0pCgllbGlmIHNlbGVjdCA9PSIyIjoKCQlvcy5zeXN0ZW0oImNsZWFyIikKCQlsb2dvKCkKCQlwcmludCgiIikKCQlvcy5zeXN0ZW0oJ2VjaG8gLWUgIlx0ICAgIFB1YmxpYyBJRCBDbG9uaW5nICIgfCBsb2xjYXQnKQoJCXByaW50KCIiKQoJCWlkdCA9IHJhd19pbnB1dCgiIFB1dCBJZC91c2VyIDogIikKCQlvcy5zeXN0ZW0oImNsZWFyIikKCQlsb2dvKCkKCQlwcmludCgiIikKCQlvcy5zeXN0ZW0oJ2VjaG8gLWUgIlx0ICAgIEdhdGhlcmluZyBJbmZvcm1hdGlvbiAiIHwgbG9sY2F0JykKCQlwcmludCgiIikKCQl0cnk6CgkJCXIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZW4sIGhlYWRlcnM9aGVhZGVyKQoJCQlxID0ganNvbi5sb2FkcyhyLnRleHQpCgkJCW9zLnN5c3RlbSgiY2xlYXIiKQoJCQlsb2dvKCkKCQkJcHJpbnQoIiIpCgkJCW9zLnN5c3RlbSgnZWNobyAtZSAiXHQgICAgRm9sbG93ZXJzIENsb25pbmcgIiB8IGxvbGNhdCcpCgkJCXByaW50KCIiKQoJCQlwcmludCgiIFRhcmdldCB1c2VyIDogIitxWyJuYW1lIl0pCgkJZXhjZXB0IChLZXlFcnJvciAsIElPRXJyb3IpOgoJCSAgICBwcmludCgiIikKCQkgICAgcHJpbnQoIlxuXHQgICAgXDAzM1sxOzMxbSBMb2dnZWQgaW4gaWQgaGFzIGNoZWNrcG9pbnRcMDMzWzA7OTdtIikKCQkgICAgcHJpbnQoIiIpCgkJICAgIHJhd19pbnB1dCgiXG4gUHJlc3MgZW50ZXIgdG8gYmFjayAiKQoJCSAgICBsX21lbnUoKQoJCXIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyIvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPSIrdG9rZW4rIiZsaW1pdD01MDAwIiwgaGVhZGVycz1oZWFkZXIpCgkJeiA9IGpzb24ubG9hZHMoci50ZXh0KQoJCWZvciBpIGluIHpbImRhdGEiXToKCQkJdWlkPWlbJ2lkJ10KCQkJbmE9aVsnbmFtZSddCgkJCW5tPW5hLnJzcGxpdCgiICIpWzBdCgkJCWlkLmFwcGVuZCh1aWQrJ3wnK25tKQoJZWxpZiBzZWxlY3QgPT0iMyI6CgkJbWV0aG9kX21lbnUoKQoJZWxpZiBzZWxlY3QgPT0iNCI6CgkgICAgbG9nb3V0KCkKCWVsc2U6CgkgICAgcHJpbnQoIiIpCgkgICAgcHJpbnQoIlx0ICAgICIrYysiU2VsZWN0IHZhbGlkIG1ldGhvZCIrYzIpCgkgICAgcHJpbnQoIiIpCgkgICAgbF9tZW51X3NlbGVjdCgpCglwcmludCgiIFRvdGFsIElEcyA6ICIrc3RyKGxlbihpZCkpKQoJdGltZS5zbGVlcCgwLjUpCglwcmludCgiIFRoZSBwcm9jZXNzIGlzIHJ1bm5pbmcgaW4gYmFja2dyb3VuZCIpCglwcmludCgiIikKCXByaW50IDQ3KigiLSIpCglwcmludCgnJykKCWRlZiBtYWluKGFyZyk6CgkJdXNlcj1hcmcKCQl1aWQsbmFtZT11c2VyLnNwbGl0KCJ8IikKCQl0cnk6CgkJCXBhc3MxID0gbmFtZSsiMTIzIgoJCQlkYXRhID0gcmVxdWVzdHMuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0iK3VpZCsiJnBhc3M9IitwYXNzMSwgaGVhZGVycz1oZWFkZXIpLnRleHQKCQkJcSA9IGpzb24ubG9hZHMoZGF0YSkKCQkJaWYgImxvYyIgaW4gcToKCQkJCXByaW50KCJcMDMzWzE7MzJtW0NoaWRpIFN1Y2Nlc3NmdWxdIFwwMzNbMTszMG0iK3VpZCsiIHwgIitwYXNzMSsiXDAzM1swOzk3bSIpCgkJCQlvayA9IG9wZW4oIm9rLnR4dCIsImEiKQoJCQkJb2sud3JpdGUodWlkKyIgfCAiK3Bhc3MxKyJcbiIpCgkJCQlvay5jbG9zZSgpCgkJCQlva3MuYXBwZW5kKHVpZCtwYXNzMSkKCQkJZWxzZToKCQkJCWlmICJ3d3cuZmFjZWJvb2suY29tIiBpbiBxWyJlcnJvciJdOgoJCQkJCXByaW50KCJbQ2hlY2twb2ludF0gIit1aWQrIiB8ICIrcGFzczEpCgkJCQkJY3AgPSBvcGVuKCJjcC50eHQiLCJhIikKCQkJCQljcC53cml0ZSh1aWQrIiB8ICIrcGFzczErIlxuIikKCQkJCQljcC5jbG9zZSgpCgkJCQkJY3BzLmFwcGVuZCh1aWQrcGFzczEpCgkJCQllbHNlOgoJCQkJCXBhc3MyID0gbmFtZSsiMTIzNCIKCQkJCQlkYXRhID0gcmVxdWVzdHMuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0iK3VpZCsiJnBhc3M9IitwYXNzMiwgaGVhZGVycz1oZWFkZXIpLnRleHQKCQkJCQlxID0ganNvbi5sb2FkcyhkYXRhKQoJCQkJCWlmICJsb2MiIGluIHE6CgkJCQkJCXByaW50KCJcMDMzWzE7MzJtW0NoaWRpIFN1Y2Nlc3NmdWxdIFwwMzNbMTszMG0iK3VpZCsiIHwgIitwYXNzMisiXDAzM1swOzk3bSIpCgkJCQkJCW9rID0gb3Blbigib2sudHh0IiwiYSIpCgkJCQkJCW9rLndyaXRlKHVpZCsiIHwgIitwYXNzMisiXG4iKQoJCQkJCQlvay5jbG9zZSgpCgkJCQkJCW9rcy5hcHBlbmQodWlkK3Bhc3MyKQoJCQkJCWVsc2U6CgkJCQkJCWlmICJ3d3cuZmFjZWJvb2suY29tIiBpbiBxWyJlcnJvciJdOgoJCQkJCQkJcHJpbnQoIltDaGlkaSBDaGVja3BvaW50XSAiK3VpZCsiIHwgIitwYXNzMikKCQkJCQkJCWNwID0gb3BlbigiY3AudHh0IiwiYSIpCgkJCQkJCQljcC53cml0ZSh1aWQrIiB8ICIrcGFzczIrIlxuIikKCQkJCQkJCWNwLmNsb3NlKCkKCQkJCQkJCWNwcy5hcHBlbmQodWlkK3Bhc3MyKQoJCQkJCQllbHNlOgoJCQkJCQkJcGFzczMgPSBuYW1lKyIxMjM0NSIKCQkJCQkJCWRhdGEgPSByZXF1ZXN0cy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPSIrdWlkKyImcGFzcz0iK3Bhc3MzLCBoZWFkZXJzPWhlYWRlcikudGV4dAoJCQkJCQkJcSA9IGpzb24ubG9hZHMoZGF0YSkKCQkJCQkJCWlmICJsb2MiIGluIHE6CgkJCQkJCQkJcHJpbnQoIlwwMzNbMTszMm1bQ2hpZGkgU3VjY2Vzc2Z1bF0gXDAzM1sxOzMwbSIrdWlkKyIgfCAiK3Bhc3MzKyJcMDMzWzA7OTdtIikKCQkJCQkJCQlvayA9IG9wZW4oIm9rLnR4dCIsImEiKQoJCQkJCQkJCW9rLndyaXRlKHVpZCsiIHwgIitwYXNzMysiXG4iKQoJCQkJCQkJCW9rLmNsb3NlKCkKCQkJCQkJCQlva3MuYXBwZW5kKHVpZCtwYXNzMykKCQkJCQkJCWVsc2U6CgkJCQkJCQkJaWYgInd3dy5mYWNlYm9vay5jb20iIGluIHFbImVycm9yIl06CgkJCQkJCQkJCXByaW50KCJbQ2hpZGkgQ2hlY2twb2ludF0gIit1aWQrIiB8ICIrcGFzczMpCgkJCQkJCQkJCWNwID0gb3BlbigiY3AudHh0IiwiYSIpCgkJCQkJCQkJCWNwLndyaXRlKHVpZCsiIHwgIitwYXNzMysiXG4iKQoJCQkJCQkJCQljcC5jbG9zZSgpCgkJCQkJCQkJCWNwcy5hcHBlbmQodWlkK3Bhc3MzKQoJCQkJCQkJCWVsc2U6CgkJCQkJCQkJCXBhc3M0ID0gbmFtZSsiNzg2IgoJCQkJCQkJCQlkYXRhID0gcmVxdWVzdHMuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0iK3VpZCsiJnBhc3M9IitwYXNzNCwgaGVhZGVycz1oZWFkZXIpLnRleHQKCQkJCQkJCQkJcSA9IGpzb24ubG9hZHMoZGF0YSkKCQkJCQkJCQkJaWYgImxvYyIgaW4gcToKCQkJCQkJCQkJCXByaW50KCJcMDMzWzE7MzJtW0NoaWRpIFN1Y2Nlc3NmdWxdIFwwMzNbMTszMG0iK3VpZCsiIHwgIitwYXNzNCsiXDAzM1swOzk3bSIpCgkJCQkJCQkJCQlvayA9IG9wZW4oIm9rLnR4dCIsImEiKQoJCQkJCQkJCQkJb2sud3JpdGUodWlkKyIgfCAiK3Bhc3M0KyJcbiIpCgkJCQkJCQkJCQlvay5jbG9zZSgpCgkJCQkJCQkJCQlva3MuYXBwZW5kKHVpZCtwYXNzNCkKCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCWlmICJ3d3cuZmFjZWJvb2suY29tIiBpbiBxWyJlcnJvciJdOgoJCQkJCQkJCQkJCXByaW50KCJbQ2hpZGkgQ2hlY2twb2ludF0gIit1aWQrIiB8ICIrcGFzczQpCgkJCQkJCQkJCQkJY3AgPSBvcGVuKCJjcC50eHQiLCJhIikKCQkJCQkJCQkJCQljcC53cml0ZSh1aWQrIiB8ICIrcGFzczQrIlxuIikKCQkJCQkJCQkJCQljcC5jbG9zZSgpCgkJCQkJCQkJCQkJY3BzLmFwcHBlbmQodWlkK3Bhc3M0KQoJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQlwYXNzNSA9ICI3ODY3ODYiCgkJCQkJCQkJCQkJZGF0YSA9IHJlcXVlc3RzLmdldCgiaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9Iit1aWQrIiZwYXNzPSIrcGFzczUsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CgkJCQkJCQkJCQkJcSA9IGpzb24ubG9hZHMoZGF0YSkKCQkJCQkJCQkJCQlpZiAibG9jIiBpbiBxOgoJCQkJCQkJCQkJCQlwcmludCgiXDAzM1sxOzMybVtDaGlkaSBTdWNjZXNzZnVsXSBcMDMzWzE7MzBtIit1aWQrIiB8ICIrcGFzczUrIlwwMzNbMDs5N20iKQoJCQkJCQkJCQkJCQlvayA9IG9wZW4oIm9rLnR4dCIsImEiKQoJCQkJCQkJCQkJCQlvay53cml0ZSh1aWQrIiB8ICIrcGFzczUrIlxuIikKCQkJCQkJCQkJCQkJb2suY2xvc2UoKQoJCQkJCQkJCQkJCQlva3MuYXBwZW5kKHVpZCtwYXNzNSkKCQkJCQkJCQkJCQllbHNlOgoJCQkJCQkJCQkJCQlpZiAid3d3LmZhY2Vib29rLmNvbSIgaW4gcVsiZXJyb3IiXToKCQkJCQkJCQkJCQkJCXByaW50KCJbQ2hpZGkgQ2hlY2twb2ludF0gIit1aWQrIiB8ICIrcGFzczUpCgkJCQkJCQkJCQkJCQljcCA9IG9wZW4oImNwLnR4dCIsImEiKQoJCQkJCQkJCQkJCQkJY3Aud3JpdGUodWlkKyIgfCAiK3Bhc3M1KyJcbiIpCgkJCQkJCQkJCQkJCQljcC5jbG9zZSgpCgkJCQkJCQkJCQkJCQljcHMuYXBwZW5kKHVpZCtwYXNzNSkKCQkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJCXBhc3M2ID0gIjc4NjAwMCIKCQkJCQkJCQkJCQkJCWRhdGEgPSByZXF1ZXN0cy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPSIrdWlkKyImcGFzcz0iK3Bhc3M2KS50ZXh0CgkJCQkJCQkJCQkJCQlxID0ganNvbi5sb2FkcyhkYXRhKQoJCQkJCQkJCQkJCQkJaWYgImxvYyIgaW4gcToKCQkJCQkJCQkJCQkJCQlwcmludCgiXDAzM1sxOzMybVtDaGlkaSBTdWNjZXNzZnVsXSBcMDMzWzE7MzBtIit1aWQrIiB8ICIrcGFzczYrIlwwMzNbMDs5N20iKQoJCQkJCQkJCQkJCQkJCW9rID0gb3Blbigib2sudHh0IiwiYSIpCgkJCQkJCQkJCQkJCQkJb2sud3JpdGUodWlkKyIgfCAiK3Bhc3M2KyJcbiIpCgkJCQkJCQkJCQkJCQkJb2suY2xvc2UoKQoJCQkJCQkJCQkJCQkJCW9rcy5hcHBlbmQodWlkK3Bhc3M2KQoJCQkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJCQlpZiAid3d3LmZhY2Vib29rLmNvbSIgaW4gcVsiZXJyb3IiXToKCQkJCQkJCQkJCQkJCQkJcHJpbnQoIltDaGlkaSBDaGVja3BvaW50XSAiK3VpZCsiIHwgIitwYXNzNikKCQkJCQkJCQkJCQkJCQkJY3AgPSBvcGVuKCJjcC50eHQiLCJhIikKCQkJCQkJCQkJCQkJCQkJY3Aud3JpdGUodWlkKyIgfCAiK3Bhc3M2KyJcbiIpCgkJCQkJCQkJCQkJCQkJCWNwLmNsb3NlKCkKCQkJCQkJCQkJCQkJCQkJY3BzLmFwcGVuZCh1aWQrcGFzczYpCgkJCQkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJCQkJcGFzczcgPSAiUGFraXN0YW4iCgkJCQkJCQkJCQkJCQkJCWRhdGEgPSByZXF1ZXN0cy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPSIrdWlkKyImcGFzcz0iK3Bhc3M3LCBoZWFkZXJzPWhlYWRlcikudGV4dAoJCQkJCQkJCQkJCQkJCQlxID0ganNvbi5sb2FkcyhkYXRhKQoJCQkJCQkJCQkJCQkJCQlpZiAibG9jIiBpbiBxOgoJCQkJCQkJCQkJCQkJCQkJcHJpbnQoIlwwMzNbMTszMm1bQ2hpZGkgU3VjY2Vzc2Z1bF0gXDAzM1sxOzMwbSIrdWlkKyIgfCAiK3Bhc3M3KyJcMDMzWzA7OTdtIikKCQkJCQkJCQkJCQkJCQkJCW9rID0gb3Blbigib2sudHh0IiwiYSIpCgkJCQkJCQkJCQkJCQkJCQlvay53cml0ZSh1aWQrIiB8ICIrcGFzczcrIlxuIikKCQkJCQkJCQkJCQkJCQkJCW9rLmNsb3NlKCkKCQkJCQkJCQkJCQkJCQkJCW9rcy5hcHBlbmQodWlkK3Bhc3M3KQoJCQkJCQkJCQkJCQkJCQllbHNlOgoJCQkJCQkJCQkJCQkJCQkJaWYgInd3dy5mYWNlYm9vay5jb20iIGluIHFbImVycm9yIl06CgkJCQkJCQkJCQkJCQkJCQkJcHJpbnQoIltDaGlkaSBDaGVja3BvaW50XSAiK3VpZCsiIHwgIitwYXNzNykKCQkJCQkJCQkJCQkJCQkJCQljcCA9IG9wZW4oImNwLnR4dCIsImEiKQoJCQkJCQkJCQkJCQkJCQkJCWNwLndyaXRlKHVpZCsiIHwgIitwYXNzNysiXG4iKQoJCQkJCQkJCQkJCQkJCQkJCWNwLmNsb3NlKCkKCQkJCQkJCQkJCQkJCQkJCQljcHMuYXBwZW5kKHVpZCtwYXNzNykKCQkJCQkJCQkJCQkJCQkJCQoJCWV4Y2VwdDoKCQkJcGFzcwoJCglwID0gVGhyZWFkUG9vbCgzMCkKCXAubWFwKG1haW4saWQpCglwcmludCgiIikKCXByaW50KDQ3KiItIikKCXByaW50KCIiKQoJcHJpbnQoIiBUaGUgcHJvY2VzcyBoYXMgY29tcGxldGVkIikKCXByaW50KCIgVG90YWwgT2svQ3AgOiIrc3RyKGxlbihva3MpKSkrIi8iK3N0cihsZW4oY3BzKSkKCXByaW50KCIiKQoJcHJpbnQoNDcqIi0iKQoJcHJpbnQoIiIpCglyYXdfaW5wdXQoIiBQcmVzcyBlbnRldCB0byBiYWNrICIpCglsX21lbnUoKQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgbWV0aG9kX21lbnUoKQo="))